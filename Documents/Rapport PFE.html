<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="DIAKITE Abdoul Oudouss, ETTADLAOUI Othmane">

<title>Rapport PFE</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="Rapport PFE_files/libs/clipboard/clipboard.min.js"></script>
<script src="Rapport PFE_files/libs/quarto-html/quarto.js"></script>
<script src="Rapport PFE_files/libs/quarto-html/popper.min.js"></script>
<script src="Rapport PFE_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Rapport PFE_files/libs/quarto-html/anchor.min.js"></script>
<link href="Rapport PFE_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Rapport PFE_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Rapport PFE_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Rapport PFE_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Rapport PFE_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="Rapport PFE_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="Rapport PFE_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#cadre-réglementaire-marocain" id="toc-cadre-réglementaire-marocain" class="nav-link" data-scroll-target="#cadre-réglementaire-marocain"><span class="toc-section-number">2</span>  Cadre réglementaire marocain</a></li>
  <li><a href="#modélisation-du-prix-des-actions" id="toc-modélisation-du-prix-des-actions" class="nav-link" data-scroll-target="#modélisation-du-prix-des-actions"><span class="toc-section-number">3</span>  Modélisation du prix des actions</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Rapport PFE</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>DIAKITE Abdoul Oudouss, ETTADLAOUI Othmane </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>Suite aux crises multiples qui ont secoué le monde de la finance et de l’assurance notamment celle de 2008, les autorités se sont rendu compte de l’insuffisance de la supervision prudentielle. Cette dernière s’est montré très chétive lors de la crise d’où la nécessité de mettre en place de nouvelles dispositions prudentielles plus robustes.</p>
<p>C’est dans ce contexte, à l’image de <em>Bale 2</em> pour la finance, que la <em>Solvabilté 2</em> voit le jour dans le milieu de l’assurance. Cette réforme réglementaire européenne vient renforcer la précédente en adaptant au mieux les exigences de fonds propres des compagnies d’assurances et de réassurances aux risques qu’elles encourent.</p>
<p>Les insuffisances évoquées n’ont pas épargné le cadre prudentiel marocain. C’est ainsi que l’Autorité de Contrôle des Assurances et de la Prévoyance Sociale (ACAPS<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>) a adopter la norme de Solvabilité Basé sur les Risques (SBR) afin de tenir compte de la diversités des risques encourues par les compagnies d’assurances et de réassurances marocaines. La SBR s’articule autour de trois piliers :</p>
<ul>
<li><em>Le pilier I</em> regroupe les <em>exigences quantitatives</em>, à savoir les règles de valorisation des actifs et des passifs ainsi que les exigences de capital et leur mode de calcul;</li>
<li><em>Le pilier II</em> porte sur les <em>exigences qualitatives</em> et définit les règles de gouvernance et de gestion des risques, en l’occurrence l’évaluation interne des risques de la solvabilité;</li>
<li><em>Le pilier III</em> concerne, quant à lui, les <em>obligations de reporting</em> à l’Autorité et de diffusion de l’information au public.</li>
</ul>
</section>
<section id="cadre-réglementaire-marocain" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="cadre-réglementaire-marocain"><span class="header-section-number">2</span> Cadre réglementaire marocain</h2>
<p>Le Maroc est l’un des acteurs majeurs de l’assurance en Afrique. Ses compagnies ne cessent de gagner du terrain dans les marchés de la sous-région notamment en Afrique de l’ouest. Selon un rapport de l’<a href="https://www.atlas-mag.net/article/marche-africain-de-l-assurance-en-2019-chiffre-d-affaires-des-principaux-pays">Atlas Mag</a><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, le Maroc est classé <strong>2ème</strong> en arfique et <strong>49ème</strong> modial avec un <strong>chiffre d’affaire de 5 343 millions USD</strong> en 2021.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-classement" class="anchored">

<table class="table" style="font-size: 10px; width: auto !important; margin-left: auto; margin-right: auto;"><caption>Table&nbsp;1:  Marché africain de l’assurance en 2021 </caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Rang </th>
   <th style="text-align:left;"> Rang </th>
   <th style="text-align:left;"> Pays </th>
   <th style="text-align:left;"> Chiffre d'affaires </th>
   <th style="text-align:left;"> Chiffre d'affaires </th>
   <th style="text-align:left;"> Evolution 2020-2021 </th>
   <th style="text-align:left;"> Parts 2021 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;width: 2cm; "> Régional </td>
   <td style="text-align:left;width: 3cm; "> Mondial </td>
   <td style="text-align:left;width: 2cm; "> Pays </td>
   <td style="text-align:left;width: 2cm; "> 2021 </td>
   <td style="text-align:left;width: 2cm; "> 2020 </td>
   <td style="text-align:left;width: 2cm; "> Evolution 2020-2021 </td>
   <td style="text-align:left;width: 2cm; "> Parts 2021 </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 1 </td>
   <td style="text-align:left;width: 3cm; "> 19 </td>
   <td style="text-align:left;width: 2cm; "> Afrique du Sud </td>
   <td style="text-align:left;width: 2cm; "> 51 215 </td>
   <td style="text-align:left;width: 2cm; "> 41 110 </td>
   <td style="text-align:left;width: 2cm; "> 24,58% </td>
   <td style="text-align:left;width: 2cm; "> 69,03% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 2 </td>
   <td style="text-align:left;width: 3cm; "> 49 </td>
   <td style="text-align:left;width: 2cm; "> Maroc </td>
   <td style="text-align:left;width: 2cm; "> 5 343 </td>
   <td style="text-align:left;width: 2cm; "> 4 774 </td>
   <td style="text-align:left;width: 2cm; "> 11,92% </td>
   <td style="text-align:left;width: 2cm; "> 7,20% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 3 </td>
   <td style="text-align:left;width: 3cm; "> 55 </td>
   <td style="text-align:left;width: 2cm; "> Egypte </td>
   <td style="text-align:left;width: 2cm; "> 2 808 </td>
   <td style="text-align:left;width: 2cm; "> 2 390 </td>
   <td style="text-align:left;width: 2cm; "> 17,49% </td>
   <td style="text-align:left;width: 2cm; "> 3,78% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 4 </td>
   <td style="text-align:left;width: 3cm; "> 56 </td>
   <td style="text-align:left;width: 2cm; "> Kenya </td>
   <td style="text-align:left;width: 2cm; "> 2 422 </td>
   <td style="text-align:left;width: 2cm; "> 2 190 </td>
   <td style="text-align:left;width: 2cm; "> 10,59% </td>
   <td style="text-align:left;width: 2cm; "> 3,26% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 5 </td>
   <td style="text-align:left;width: 3cm; "> 70 </td>
   <td style="text-align:left;width: 2cm; "> Nigéria </td>
   <td style="text-align:left;width: 2cm; "> 1 582 </td>
   <td style="text-align:left;width: 2cm; "> 1 433 </td>
   <td style="text-align:left;width: 2cm; "> 10,40% </td>
   <td style="text-align:left;width: 2cm; "> 2,13% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 6 </td>
   <td style="text-align:left;width: 3cm; "> 79 </td>
   <td style="text-align:left;width: 2cm; "> Algérie </td>
   <td style="text-align:left;width: 2cm; "> 1 075 </td>
   <td style="text-align:left;width: 2cm; "> 1 095 </td>
   <td style="text-align:left;width: 2cm; "> -1,83% </td>
   <td style="text-align:left;width: 2cm; "> 1,45% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 7 </td>
   <td style="text-align:left;width: 3cm; "> 81 </td>
   <td style="text-align:left;width: 2cm; "> Tunisie </td>
   <td style="text-align:left;width: 2cm; "> 985 </td>
   <td style="text-align:left;width: 2cm; "> 900 </td>
   <td style="text-align:left;width: 2cm; "> 9,44% </td>
   <td style="text-align:left;width: 2cm; "> 1,33% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 8 </td>
   <td style="text-align:left;width: 3cm; "> 83 </td>
   <td style="text-align:left;width: 2cm; "> Namibie </td>
   <td style="text-align:left;width: 2cm; "> 867 </td>
   <td style="text-align:left;width: 2cm; "> 788 </td>
   <td style="text-align:left;width: 2cm; "> 10,03% </td>
   <td style="text-align:left;width: 2cm; "> 1,17% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 9 </td>
   <td style="text-align:left;width: 3cm; "> 86 </td>
   <td style="text-align:left;width: 2cm; "> Côte d'Ivoire </td>
   <td style="text-align:left;width: 2cm; "> 844 </td>
   <td style="text-align:left;width: 2cm; "> 694 </td>
   <td style="text-align:left;width: 2cm; "> 21,61% </td>
   <td style="text-align:left;width: 2cm; "> 1,14% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> 10 </td>
   <td style="text-align:left;width: 3cm; "> 88 </td>
   <td style="text-align:left;width: 2cm; "> Ghana </td>
   <td style="text-align:left;width: 2cm; "> 814 </td>
   <td style="text-align:left;width: 2cm; "> 686 </td>
   <td style="text-align:left;width: 2cm; "> 18,66% </td>
   <td style="text-align:left;width: 2cm; "> 1,10% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> Total des 10 premiers marchés </td>
   <td style="text-align:left;width: 3cm; "> Total des 10 premiers marchés </td>
   <td style="text-align:left;width: 2cm; "> Total des 10 premiers marchés </td>
   <td style="text-align:left;width: 2cm; "> 67 955 </td>
   <td style="text-align:left;width: 2cm; "> 56 060 </td>
   <td style="text-align:left;width: 2cm; "> 21,22% </td>
   <td style="text-align:left;width: 2cm; "> 91,60% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> Reste du marché </td>
   <td style="text-align:left;width: 3cm; "> Reste du marché </td>
   <td style="text-align:left;width: 2cm; "> Reste du marché </td>
   <td style="text-align:left;width: 2cm; "> 6 235 </td>
   <td style="text-align:left;width: 2cm; "> 5 821 </td>
   <td style="text-align:left;width: 2cm; "> 7,11% </td>
   <td style="text-align:left;width: 2cm; "> 8,40% </td>
  </tr>
  <tr>
   <td style="text-align:left;width: 2cm; "> Total </td>
   <td style="text-align:left;width: 3cm; "> Total </td>
   <td style="text-align:left;width: 2cm; "> Total </td>
   <td style="text-align:left;width: 2cm; "> 74 190 </td>
   <td style="text-align:left;width: 2cm; "> 61 881 </td>
   <td style="text-align:left;width: 2cm; "> 19,89% </td>
   <td style="text-align:left;width: 2cm; "> 100,00% </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Le royaume doit ce succès à la rigueur de sont dispositif prudentiel qui se consolide de plus en plus. La SBR vient en ce sens renforcer cette dynamique. Elle s’établi sur trois piliers :</p>
<div id="fig-piliers" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Rapport%20PFE_files/piliers.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Les 3 piliers de la SBR</figcaption><p></p>
</figure>
</div>
</section>
<section id="modélisation-du-prix-des-actions" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="modélisation-du-prix-des-actions"><span class="header-section-number">3</span> Modélisation du prix des actions</h2>
<p>Le prix d’une action ou plus communément appelé cours d’une action représente le prix auquel elle est acheté ou vendue sur un marché boursier. Ce prix fluctue en fonction de l’offre et de la demande pour cette action, ainsi que de nombreux autres facteurs tels que les performances financières de l’entreprise, les conditions économiques générales et les évènements mondiaux. Autrement dit, le cours de l’action représente la valeur perçue de l’entreprise par les investisseurs à un moment.</p>
<p>Ainsi, si la valeur présente de l’action est une donnée du marché, sa valeur future quant à elle est aléatoire d’où la nécessité de sa modélisation.</p>
<section id="modèle-de-black-scholes" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="modèle-de-black-scholes"><span class="header-section-number">3.1</span> Modèle de Black-Scholes</h3>
<p>Le modèle de Black-Scholes modèle a été développé en 1973 par <em>Fischer Black</em>, <em>Robert Merton</em> et <em>Myron Scholes</em>, qui ont reçu le prix Nobel d’économie en 1997 pour leurs travaux. Ce modèle est l’un des concepts les plus importants dans la théorie de la finance modèle. Il permet dévaluer le prix d’une option européenne en fnction de son type et du prix de l’actif sous-jacent. Le modèle repose sur plusieurs hypothèses dont l’une d’entre elle est que le cours de l’actif sous jacent suit un mouvement géométrique avec une volatilité constante.</p>
<p>En termes mathématiques, le prix d’une action peut donc être représenté comme une fonction scalaire du temps actuel <span class="math inline">\(t\)</span>. Nous noterons cette fonction <span class="math inline">\(S(t)\)</span>. Notons qu’en termes techniques, <span class="math inline">\(S(t)\)</span> est une série temporelle, qui bien qu’apparemment continue (avec continuité <span class="math inline">\(C[0]\)</span>), est en réalité discontinue (sujette de sauts). De plus, ce n’est pas une fonction dont la dérivée première n’existe pas.</p>
<p>Nous allons modéliser <span class="math inline">\(S(t)\)</span> comme une variable stochastique. Dans cette situation, nous sommes tenus de ne pas utiliser les outils standards de calcul (tels que les séries de Taylor, les dérivées, l’intégrale de Riemann), mais sont plutôt contraints d’utiliser les outils de calculs stochastiques (tels que le lemme d’Ito, la dérivée de Radon-Nykodym, Riemann -Stieltjes intégrale) pour faire avancer notre modélisation.</p>
<p>Dans ce contexte, le comportement de la variable <span class="math inline">\(S(t)\)</span> peut être décrit pour une <em>Equation Différentielle Stochastique</em> (<span class="math inline">\(EDS\)</span>). Dans le cas des actions, l’<span class="math inline">\(EDS\)</span> standard utilisée pour modéliser la trajectoire du cours est appelé <em>Mouvement Brownien Géométrique</em> (<span class="math inline">\(GBM\)</span> : Geometric Brownian Motion). Sous la mesure de probabilité dite réelle <span class="math inline">\(P\)</span>, le mouvement brownien géométrique (<span class="math inline">\(GBM\)</span>) est formellement représenté en temps continu de la manière suivante : <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p><span id="eq-gbmp"><span class="math display">\[
dS_t = \mu S_t dt + \sigma S_t dW^P_t
  \tag{1}\]</span></span></p>
<p>où <span class="math inline">\(\mu\)</span> représente le drift, <span class="math inline">\(\sigma\)</span> la volatilité et <span class="math inline">\(W^P\)</span> est mouvement brownien standard sous la probabilité <span class="math inline">\(P\)</span>.</p>
<p>Cependant, dans la littérature, cette représentation n’est pas utilisée pour la valorisation des produit dérivés. Il est remplacé par la représentation suivante sous la mesure de probabilité neutre au risque <span class="math inline">\(\mathbb{Q}\)</span>:</p>
<p><span id="eq-gbmq"><span class="math display">\[
dS_t = r S_t dt + \sigma S_t dW^\mathbb{Q}_t
  \tag{2}\]</span></span></p>
<p>Dans l’<a href="#eq-gbmq">Equation&nbsp;2</a> précédente, nous avons remplacé <span class="math inline">\(\mu\)</span> par le taux d’intérêt sans risque <span class="math inline">\(r\)</span>, <span class="math inline">\(\sigma\)</span> est la volatilité et <span class="math inline">\(dW\)</span> est l’incrément d’un processus de Wiener. L’équation 2 peut en outre être représentée comme suit :</p>
<p><span class="math display">\[
\frac{dS_t}{S_t} = r dt + \sigma  dW^\mathbb{Q}_t
\]</span></p>
<p>Dans cette dernière équation, nous pouvons identifier le terme <span class="math inline">\(\frac{dS_t}{S_t}\)</span> du côté gauche de l’équation comme le rendement des capitaux propres. Ainsi, les deux termes du côté droit de l’équation sont un « terme de dérive » et un « terme de volatilité ». Chacun de ces termes est « mis à l’échelle » par les paramètres μ et σ , qui sont calibrés sur les prix actuels du marché des instruments négociés, tels que les options d’achat et de vente.</p>
<p>Intéressons nous aux solutions <span class="math inline">\((S_t)_{t\geq 0}\)</span> de l’EDS <a href="#eq-gbmq">Equation&nbsp;2</a> qui peut être réécrite comme suit :</p>
<p><span id="eq-intEDS"><span class="math display">\[
S_t = x_0 + \int_{0}^{t}S_s(\mu dt + \sigma  dW^\mathbb{P}_s)\;;\;\;avec\; S_0=x_0
\tag{3}\]</span></span></p>
<p>Puisque <span class="math inline">\(\mu\)</span> et <span class="math inline">\(\sigma\)</span> sont positifs, cela signifie que l’on cherche un processus adapté <span class="math inline">\((S_t)_{t\geq 0 }\)</span> tel que les intégrales <span class="math inline">\(\int_0^t S_s\)</span> et <span class="math inline">\(\int_0^t S_s dW^\mathbb{P}_s\)</span> aient un sens, et qui vérifie l’<a href="#eq-intEDS">Equation&nbsp;3</a>, pour chaque <span class="math inline">\(t\)</span>.</p>
<p>Commençons par un calcul formel en posant <span class="math inline">\(Y_t = log(S_t)\)</span> où <span class="math inline">\(S_t\)</span> est une solution de l’<a href="#eq-intEDS">Equation&nbsp;3</a>. <span class="math inline">\(S_t\)</span> est un processus d’Itô avec <span class="math inline">\(K_s = \mu S_s\)</span> et <span class="math inline">\(H_s = \sigma S_s\)</span>. Appliquons la formule d’Itô à <span class="math inline">\(f(x) = log(x)\)</span>. On obtient, en supposant <span class="math inline">\(S_t\)</span> positif:</p>
<p><span class="math display">\[
log(S_t) = log(S_0) + \int_{0}^{t} \frac{dS_s}{S_s}+\frac{1}{2} \int_{0}^{t}\frac{-1}{S_s^2}\sigma^2S_s^2 ds
\]</span> soit, en utilsant <a href="#eq-gbmp">Equation&nbsp;1</a></p>
<p><span class="math display">\[
Y_t = Y_0 + \int_0^t (\mu - \frac{\sigma^2}{2})ds + \int_0^t\sigma dW_s
\]</span>,</p>
<p>puis</p>
<p><span class="math display">\[
Y_t = log(S_t) =  log(S_0)+  (\mu - \frac{\sigma^2}{2})t + \sigma W_t
\]</span> ainsi :</p>
<p><span id="eq-solBS"><span class="math display">\[
S_t = S_0 \exp((\mu - \frac{\sigma^2}{2})t + \sigma W_t)
\tag{4}\]</span></span> est solution de l’EDS.</p>
<div class="cell" data-label="fig-gbmPlot">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Rapport-PFE_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Simulation de la trajectoire du prix de l’action X par la méthode de Monte Carlo en utilsant le modèle de Black and Scholes</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://www.acaps.ma/fr/l-acaps/missions<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://www.atlas-mag.net/article/marche-africain-de-l-assurance-en-2019-chiffre-d-affaires-des-principaux-pays<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Alonso Peña, Ph.D, C++ For Quantitative Finance<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>